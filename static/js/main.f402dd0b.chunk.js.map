{"version":3,"sources":["components/widgets/release/style.js","components/widgets/artist/statics.js","components/widgets/artist/index.js","components/widgets/artist/render.js","components/widgets/link/statics.js","components/widgets/link/index.js","components/widgets/link/render.js","components/widgets/release/render.js","components/widgets/release/statics.js","components/widgets/release/index.js","hooks/clients/discogs/index.js","hooks/clients/discogs/helpers.js","hooks/services/collection/get-folders/helpers.js","hooks/services/collection/get-release/helpers.js","components/app/helpers.js","components/app/reducers.js","components/app/hooks.js","hooks/services/collection/get-folders/index.js","hooks/services/collection/get-release/index.js","hooks/services/collection/get-releases/index.js","components/app/render.js","components/app/statics.js","components/app/index.js","components/app/style.js","components/root/statics.js","components/root/index.js","components/root/render.js","components/style/statics.js","components/style/render.js","components/style/index.js","index.js"],"names":["component","displayName","defaultProps","propTypes","Object","assign","id","name","last","href","title","statics","target","rel","children","node","isRequired","string","props","renderArtist","artist","index","draw","unit","withStyle","className","artists","aria-roledescription","map","styled","uri","images","CSS","escape","times","join","useMemo","create","headers","Authorization","baseURL","window","location","pathname","trim","toLowerCase","substr","format","property","flatten","current","next","concat","random","until","Math","floor","merge","release","releases","state","update","history","$push","$set","useState","setState","getFolders","get","useDiscogs","useCallback","then","useGetFolders","getRelease","resource_url","useGetRelease","getReleases","service","url","stack","data","pagination","urls","useGetReleases","fail","error","message","console","log","succeed","folders","Promise","all","response","reduce","length","basic_information","image","find","resolve","Image","src","addEventListener","shuffle","fetch","catch","useEffect","renderRelease","Release","use","onClick","createGlobalStyle","render","document","getElementById"],"mappings":"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","file":"static/js/main.f402dd0b.chunk.js","sourcesContent":["import times from 'lodash/times';\nimport styled from 'styled-components';\n\nexport const draw = unit => `${unit}px ${unit}px 0 0 #ccc`;\n\nexport default component => styled(component)`\n  font-family: 'PT Mono', monospace;\n  font-size: 1.25rem;\n  bottom: 1.5rem;\n  margin: 0 0 0 1rem;\n  position: absolute;\n  right: 1.5rem;\n\n  &:before {\n    background: url(${({ images: [{ uri }] }) => CSS.escape(uri)}) center\n      no-repeat;\n    background-size: cover;\n    content: '';\n    display: block;\n    height: 100%;\n    left: 0;\n    position: fixed;\n    top: 0;\n    width: 100%;\n  }\n\n  dl {\n    display: block;\n\n    &[aria-roledescription='title'] {\n      a {\n        background-color: #fff;\n        color: #000;\n      }\n    }\n  }\n\n  dt {\n    display: none;\n  }\n\n  dd {\n    text-align: right;\n  }\n\n  a {\n    background-color: #000;\n    box-shadow: inset 0 -4px 0 0 rgba(0, 0, 0, 0.2),\n      ${times(24, draw).join(', ')};\n    color: #fff;\n    display: inline-block;\n    padding: 0.5rem 1rem;\n    position: relative;\n    text-decoration: none;\n  }\n`;\n","export const displayName = 'Artist';\n\nexport const defaultProps = {};\n\nexport const propTypes = {};\n","import render from './render';\nimport * as statics from './statics';\n\nexport default Object.assign(render, statics);\n","import React from 'react';\n\nimport { Link } from 'components/widgets';\n\nexport default ({ id, last, name }) => (\n  <Link href={`//discogs.com/artist/${id}`} title={name}>\n    {name}\n  </Link>\n);\n","import { node, string } from 'prop-types';\n\nexport const displayName = 'Link';\n\nexport const defaultProps = {\n  target: '_blank',\n  rel: 'noreferrer',\n};\n\nexport const propTypes = {\n  children: node.isRequired,\n  href: string.isRequired,\n};\n","import render from './render';\nimport * as statics from './statics';\n\nexport default Object.assign(render, statics);\n","import React from 'react';\n\nexport default ({ children, ...props }) => <a {...props}>{children}</a>;\n","import React from 'react';\n\nimport { Artist, Link } from 'components/widgets';\n\nexport const renderArtist = (artist, index) => (\n  <li key={index}>\n    <Artist {...artist} />\n  </li>\n);\n\nexport default props => {\n  const { className, artists, id, title } = props;\n\n  return (\n    <article className={className}>\n      <dl aria-roledescription=\"artists\">\n        <dt>Artist(s)</dt>\n        <dd>\n          <ul>{artists.map(renderArtist)}</ul>\n        </dd>\n      </dl>\n      <dl aria-roledescription=\"title\">\n        <dt>Title</dt>\n        <dd>\n          <Link href={`//discogs.com/release/${id}`} title={title}>\n            {title}\n          </Link>\n        </dd>\n      </dl>\n    </article>\n  );\n};\n","export const displayName = 'Release';\n\nexport const defaultProps = {};\n\nexport const propTypes = {};\n","import render from './render';\nimport * as statics from './statics';\nimport withStyle from './style';\n\nexport default withStyle(Object.assign(render, statics));\n","import { create } from 'axios';\nimport { useMemo } from 'react';\n\nimport { identify } from './helpers';\n\nexport default () => {\n  const client = useMemo(\n    () =>\n      create({\n        headers: {\n          Authorization:\n            'Discogs key=CBYXakYdVQNblmGsSsKu, secret=oitbBZUwWnyWNIQZeLagsBAwjcyDosmo',\n          'User-Agent': 'disco-roulette/1.0',\n        },\n        baseURL: `https://api.discogs.com/users/${identify()}`,\n      }),\n    []\n  );\n\n  return client;\n};\n","export const identify = () =>\n  window.location.pathname\n    .trim()\n    .toLowerCase()\n    .substr(1) || 'pr0n';\n","import property from 'lodash/property';\n\nexport const format = property('data.folders');\n","import property from 'lodash/property';\n\nexport const format = property('data');\n","export const flatten = (current, next) => current.concat(next);\n\nexport const random = until => Math.floor(Math.random() * until) + 1 - 1;\n","import update from 'immutability-helper';\n\nexport const getInitialState = () => ({\n  history: [],\n  release: {},\n  releases: [],\n});\n\nexport const merge = ({ release, releases }) => state =>\n  update(state, {\n    ...(!!release && {\n      history: { $push: [release.id] },\n      release: { [release.id]: { $set: release } },\n    }),\n    ...(!!releases && { releases: { $set: releases } }),\n  });\n","import { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport {\n  useGetFolders,\n  useGetRelease,\n  useGetReleases,\n} from 'hooks/services/collection';\n\nimport { flatten, random } from './helpers';\nimport { getInitialState, merge } from './reducers';\n\nexport default () => {\n  const [state, setState] = useState(getInitialState());\n  const getFolders = useGetFolders();\n  const getRelease = useGetRelease();\n  const getReleases = useGetReleases();\n  const fail = useCallback(({ message: error }) => console.log({ error }), []);\n  const succeed = useCallback(\n    folders =>\n      Promise.all(folders.map(getReleases)).then(response => {\n        const releases = response.reduce(flatten);\n        const index = random(releases.length);\n        const {\n          [index]: { basic_information },\n        } = releases;\n\n        return getRelease(basic_information).then(release => {\n          const image = release.images.find(({ uri }) => !!uri);\n\n          return new Promise(resolve =>\n            Object.assign(new Image(), { src: image.uri }).addEventListener(\n              'load',\n              resolve,\n              true\n            )\n          ).then(() => setState(merge({ release, releases })));\n        });\n      }),\n    [getRelease, getReleases]\n  );\n  const shuffle = useCallback(() => {\n    const index = random(state.releases.length);\n    const {\n      [index]: { basic_information },\n    } = state.releases;\n\n    return getRelease(basic_information).then(release => {\n      const image = release.images.find(({ uri }) => !!uri);\n\n      return new Promise(resolve =>\n        Object.assign(new Image(), { src: image.uri }).addEventListener(\n          'load',\n          resolve,\n          true\n        )\n      ).then(() => setState(merge({ release })));\n    });\n  }, [state.releases, getRelease]);\n  const fetch = useCallback(\n    () =>\n      getFolders()\n        .then(succeed)\n        .catch(fail),\n    [fail, getFolders, succeed]\n  );\n  const releases = useMemo(\n    () => state.history.map(release => state.release[release]),\n    [state.history, state.release]\n  );\n\n  useEffect(() => {\n    fetch();\n  }, [fetch]);\n\n  return { releases, shuffle };\n};\n","import { useCallback } from 'react';\n\nimport { useDiscogs } from 'hooks/clients';\n\nimport { format } from './helpers';\n\nexport default () => {\n  const { get } = useDiscogs();\n  const service = useCallback(() => get('/collection/folders').then(format), [\n    get,\n  ]);\n\n  return service;\n};\n","import { useCallback } from 'react';\n\nimport { useDiscogs } from 'hooks/clients';\n\nimport { format } from './helpers';\n\nexport default () => {\n  const { get } = useDiscogs();\n  const service = useCallback(\n    ({ resource_url }) => get(resource_url).then(format),\n    [get]\n  );\n\n  return service;\n};\n","import { useCallback } from 'react';\n\nimport { useDiscogs } from 'hooks/clients';\n\nexport default () => {\n  const { get } = useDiscogs();\n  const service = useCallback(\n    ({ id, url = `/collection/folders/${id}/releases`, stack = [] }) => {\n      const check = ({\n        data: {\n          pagination: {\n            urls: { next: pagination },\n          },\n          releases,\n        },\n      }) => {\n        const next = stack.concat(releases);\n\n        return !pagination ? next : service({ stack: next, url: pagination });\n      };\n\n      return get(url).then(check);\n    },\n    [get]\n  );\n\n  return service;\n};\n","import React, { Fragment } from 'react';\n\nimport { Style } from 'components';\nimport { Release } from 'components/widgets';\n\nimport use from './hooks';\n\nexport const renderRelease = release => (\n  <Release key={release.id} {...release} />\n);\n\nexport default ({ className }) => {\n  const { releases, shuffle } = use();\n\n  return (\n    <Fragment>\n      <Style />\n      <div className={className}>\n        <button onClick={shuffle}>Shuffle</button>\n        {releases.map(renderRelease)}\n      </div>\n    </Fragment>\n  );\n};\n","export const displayName = 'App';\n\nexport const defaultProps = {};\n\nexport const propTypes = {};\n","import render from './render';\nimport * as statics from './statics';\nimport withStyle from './style';\n\nexport default withStyle(Object.assign(render, statics));\n","import styled from 'styled-components';\n\nimport { Release } from 'components/widgets';\n\nexport default component => styled(component)`\n  align-items: center;\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  overflow: hidden;\n  position: relative;\n\n  button {\n    background-color: red;\n    border: none;\n    color: white;\n    cursor: pointer;\n    display: inline-block;\n    font-family: 'PT Mono', monospace;\n    font-size: 1.5rem;\n    padding: 0.5rem 1rem;\n    position: absolute;\n    right: 1rem;\n    top: 1rem;\n    z-index: 1;\n  }\n\n  ${Release} {\n    &:not(:last-of-type) {\n      display: none;\n    }\n  }\n`;\n","export const displayName = 'Root';\n\nexport const defaultProps = {};\n\nexport const propTypes = {};\n","import render from './render';\nimport * as statics from './statics';\n\nexport default Object.assign(render, statics);\n","import React from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport { App } from 'components';\n\nexport default () => (\n  <Router>\n    <App />\n  </Router>\n);\n","export const displayName = 'ðŸ§©';\n","import { createGlobalStyle } from 'styled-components';\n\nexport default createGlobalStyle`\n  html {\n    background-color: #fff;\n    opacity: 1;\n  }\n\n  main#root {\n    height: 100vh;\n  }\n\n  figure {\n    margin: 0;\n  }\n`;\n","import * as statics from './statics';\nimport render from './render';\n\nexport default Object.assign(render, statics);\n","import { StrictMode } from 'react';\nimport { render } from 'react-dom';\n\nimport { Root } from 'components';\n\nexport default render(\n  <StrictMode>\n    <Root />\n  </StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}